import{_ as g}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{r as c,c as V,a as m,b as t,t as f,e as d,o as v}from"./app-BQVGI6gL.js";const x={data(){return{tituloMargem:"Margem sobre o preço de venda",selectTipoMargem:"mlv",custo:null,margem:null,precoVenda:null,lucro:null,taxaDesconto:null,margemLiquida:null,checkQtd:!1,labelQtd:"Qtd em gramas",loadCaixa:!1,headersCaixa:[{label:"Pedido",key:"PEDIDO"},{label:"Data",key:"DATA"},{label:"Valor",key:"VALORFORMATADO"},{label:"Operador",key:"OPERADOR"},{label:"Pagamento",key:"FORMA"},{label:"Descrição",key:"PAG"}],itemsCaixa:[{PEDIDO:"teste",DATA:"teste",VALOR:"teste",VALORFORMATADO:"teste",OPERADOR:"teste",FORMA:"teste",PAG:"teste"}]}},methods:{mudaTipoMargem(){let e=this;e.custo=null,e.margem=null,e.margemLiquida=null,e.precoVenda=null,e.lucro=null,e.taxaDesconto=null,e.selectTipoMargem=="mlc"?e.tituloMargem="Margem sobre o preço de custo":e.tituloMargem="Margem sobre o preço de venda"},calculaPrecoVenda(){let e=this;if(console.log(e.custo,e.margem),e.selectTipoMargem=="mlv"){const o=parseFloat(e.custo),l=parseFloat(e.margem);if(console.log(o,l),o<=0)return e.custo=null,e.$msg.warning("Custo precisa ser maior do que 0.");if(l<=0)return e.margem=null,e.margemLiquida=null,e.$msg.warning("Margem venda precisa ser maior do que 0.");if(l>=100)return e.margem=null,e.margemLiquida=null,e.$msg.warning("Margem venda precisa ser menor do que 100.");if(o>0&&l>0&&l<100){const r=l/100,a=o/(1-r);e.precoVenda=a,e.precoVenda=a;const n=a-o;e.lucro=n,e.lucro=n,e.descontoIfood()}else e.precoVenda=null,e.lucro=null}else{const o=parseFloat(e.custo),l=parseFloat(e.margem);if(o<=0)return e.custo=null,e.$msg.warning("Custo precisa ser maior do que 0.");if(l<=0)return e.margem=null,e.margemLiquida=null,e.$msg.warning("Margem venda precisa ser maior do que 0.");if(o>0&&l>0){const r=l/100,a=o*(1+r);e.precoVenda=a;const n=a-o;e.lucro=n,e.descontoIfood()}else e.precoVenda=null,e.lucro=null}},calculaMargens(){let e=this;if(e.selectTipoMargem=="mlv"){const o=parseFloat(e.custo),l=parseFloat(e.precoVenda);if(o<=0)return e.precoVenda=null,e.$msg.warning("Custo precisa ser maior do que 0.");if(o>l)return e.precoVenda=null,e.$msg.warning("Preço de venda precisa ser maior do que o preço de custo.");if(o>0&&l>o){const r=l-o;e.lucro=r;const a=r/l*100;e.margem=a,e.margemLiquida=e.margem,e.descontoIfood()}else e.margem=null,e.margemLiquida=null}else{const o=parseFloat(e.custo),l=parseFloat(e.precoVenda);if(o<=0)return e.precoVenda=null,e.$msg.warning("Custo precisa ser maior do que 0.");if(o>l)return e.precoVenda=null,e.$msg.warning("Preço de venda precisa ser maior do que o preço de custo.");if(o>0&&l>o){const r=l-o;e.lucro=r;const a=r/o*100;e.margem=a,e.margemLiquida=e.margem,e.descontoIfood()}else e.margem=null,e.margemLiquida=null}},descontoIfood(){let e=this;const o=isNaN(parseFloat(e.taxaDesconto)/100)?0:parseFloat(e.taxaDesconto)/100,l=parseFloat(e.precoVenda),r=parseFloat(e.custo);if(o>=1)return e.taxaDesconto=null,e.$msg.warning("Taxa do ifood precisa ser menor do que o 100%.");if(isNaN(l)||l<=0||isNaN(r)||r<0||isNaN(o)||o>=100){e.lucro=0;return}const a=l*o,n=l-r-a,i=this.selectTipoMargem=="mlv"?n/l*100:n/r*100;e.margemLiquida=i,e.lucro=n}}},M={class:"bg-slate-100"},b={class:"relative isolate overflow-hidden text-white bg-slate-100 min-h-screen py-5 sm:px-5 sm:py-2 divide-y"},q={class:"grid grid-cols-1 gap-x-8 gap-y-8 px-4 py-11 sm:px-6 md:grid-cols-6 lg:px-8"},D={class:"sm:col-span-6 text-xl"},C={class:"text-slate-900"},L={class:"sm:col-span-1"},A={class:"sm:col-span-1 sm:col-start-1"},T={class:"sm:col-span-1"},F={class:"sm:col-span-1"},O={class:"sm:col-span-1"},P={class:"sm:col-span-1"},R={class:"sm:col-span-1"};function w(e,o,l,r,a,n){const i=c("GlobalMsg"),p=c("CustomSelect"),u=c("CustomInput");return v(),V("div",M,[m(i),t("main",null,[t("div",b,[t("div",q,[t("div",D,[t("legend",C,f(a.tituloMargem),1)]),t("div",L,[m(p,{onChange:o[0]||(o[0]=s=>n.mudaTipoMargem()),modelValue:a.selectTipoMargem,"onUpdate:modelValue":o[1]||(o[1]=s=>a.selectTipoMargem=s),id:"selectTipoMargem",name:"selectTipoMargem",options:[{label:"Margem venda",value:"mlv"},{label:"Margem custo",value:"mlc"}]},null,8,["modelValue"])]),t("div",A,[m(u,{inputmode:"numeric",type:"text",onChange:o[2]||(o[2]=s=>n.calculaPrecoVenda()),formata:!0,modelValue:a.custo,"onUpdate:modelValue":o[3]||(o[3]=s=>a.custo=s),label:"Preço de custo",id:"custo",name:"custo",maxlength:"10"},{prepend:d(()=>[...o[12]||(o[12]=[t("span",{class:"text-base"},"R$",-1)])]),_:1},8,["modelValue"])]),t("div",T,[m(u,{inputmode:"numeric",onChange:o[4]||(o[4]=s=>n.calculaPrecoVenda()),formata:!0,modelValue:a.margem,"onUpdate:modelValue":o[5]||(o[5]=s=>a.margem=s),label:"Margem",id:"margem",name:"margem"},{append:d(()=>[...o[13]||(o[13]=[t("span",{class:"text-base"},"%",-1)])]),_:1},8,["modelValue"])]),t("div",F,[m(u,{inputmode:"numeric",onChange:o[6]||(o[6]=s=>n.calculaMargens()),formata:!0,modelValue:a.precoVenda,"onUpdate:modelValue":o[7]||(o[7]=s=>a.precoVenda=s),label:"Preço de venda",id:"precoVenda",name:"precoVenda"},{prepend:d(()=>[...o[14]||(o[14]=[t("span",{class:"text-base"},"R$",-1)])]),_:1},8,["modelValue"])]),t("div",O,[m(u,{inputmode:"numeric",onChange:o[8]||(o[8]=s=>n.descontoIfood()),formata:!0,modelValue:a.taxaDesconto,"onUpdate:modelValue":o[9]||(o[9]=s=>a.taxaDesconto=s),label:"Desconto",id:"taxaDesconto",name:"taxaDesconto",title:"Taxa sobre preço de venda"},{append:d(()=>[...o[15]||(o[15]=[t("span",{class:"text-base"},"%",-1)])]),_:1},8,["modelValue"])]),t("div",P,[m(u,{inputmode:"numeric",disabled:"",modelValue:a.lucro,"onUpdate:modelValue":o[10]||(o[10]=s=>a.lucro=s),formata:!0,label:"Lucro",id:"lucro",name:"lucro"},{prepend:d(()=>[...o[16]||(o[16]=[t("span",{class:"text-base"},"R$",-1)])]),_:1},8,["modelValue"])]),t("div",R,[m(u,{inputmode:"numeric",disabled:"",modelValue:a.margemLiquida,"onUpdate:modelValue":o[11]||(o[11]=s=>a.margemLiquida=s),formata:!0,label:"Margem líquida",id:"margemLiquida",name:"margemLiquida",title:"Margem após desconto da taxa ifood"},{append:d(()=>[...o[17]||(o[17]=[t("span",{class:"text-base"},"%",-1)])]),_:1},8,["modelValue"])])])])])])}const I=g(x,[["render",w]]);export{I as default};
